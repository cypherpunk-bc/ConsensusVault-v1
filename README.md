# 🤝 ConsensusVault
### A Stake-Locking Protocol Driven by Game Theory and On-chain Consensus

`ConsensusVault` 是一种基于**博弈论**与**链上共识**的资产锁定协议。它不依赖中心化管理员，而是通过智能合约将“退出权”与“集体共识”绑定，适合作为协议国库的安全层或共识型锁仓工具。

---

## ✅ 为什么值得关注

- **无管理员提币接口**：资金路径被锁在“存入 → 原路返回”，降低单点风险。
- **共识解锁**：超过 50% 投票权重触发解锁，并有 24 小时延迟。
- **O(1) 分红模型**：捐赠按权重分配，规模扩大不影响计算复杂度。

---

## 🔑 核心机制（简版）

1. **存入即获得权重**：权重决定分红与投票影响力。  
2. **投票即锁定选择**：投票后不可追加本金。  
3. **共识达成后延迟解锁**：达到阈值 → 进入倒计时 → 原路取回。  

**举例**：假设 A 存入 40 USDT、B 存入 35 USDT、C 存入 25 USDT，他们的投票权重分别为 40、35、25（存多少就有多少权重）。外部有 100 USDT 的 donate 时，分红按权重分配：A 获得 40 USDT，B 获得 35 USDT，C 获得 25 USDT。当 A 和 B 都投票同意解锁时，总投票权重 = 75%，超过 50%，金库进入 24 小时解锁倒计时。

---

## 🧩 最小集成流程（3 步）

1. **创建金库**：项目方指定 ERC20 作为储备资产。  
2. **设定捐赠来源**：交易费、罚没、收入的一部分定期 donate。  
3. **展示共识进度**：前端展示投票比例与解锁时间。  

---

## 🚀 快速使用（给项目方/用户）

1. **创建金库**：选择一个 ERC20 作为储备资产并创建金库。  
2. **存入资金**：用户存入资产获得权重与分红资格。  
3. **投票解锁**：当需要动用资金时发起投票，超过 50% 后进入 24 小时倒计时。  
4. **提现或捐赠**：解锁后原路取回；也可随时通过 `donate` 分配奖励。  

---

## 🧭 适用场景（快速扫读）

- 协议国库安全层（Doomsday Reserve）  
- 流动性挖矿与锁仓  
- 借贷协议收益分配  
- DAO 财库管理  
- NFT / GameFi / 跨链激励池  

---

## 📄 白皮书（详细机制与场景）

详情见 [WHITEPAPER_CN.md](WHITEPAPER_CN.md)

---

## ❓ FAQ / 常见问题解答

**Q1: 如果散户太懒不投票，项目方的储备金会不会死锁？**  
A: 不太会出现长期死锁。参与者存钱是为了赚 donate 分红，也需要取回本金，他们对金库流动性非常敏感。更稳妥的方式是：项目方保持 40%-45% 权重，给社区留出足够的可达共识空间，这样即便只有一部分活跃散户参与，也能推动解锁。

**Q2: 既然“谁存谁取”，共识投票还有意义吗？**  
A: 投票决定的是“金库大门是否开启”，存款决定的是“你自己箱子的钥匙”。门不开，谁也取不了；门开后，各自只能取自己的那一份。这个设计用来防止“拿到项目方钥匙就能瞬间搬空”的极端风险。

**Q3: 闪电贷能不能瞬间操纵共识？**  
A: 成本高且效果有限。即使有人短时存入大量资金，解锁也有 24 小时延迟；这段时间足够社区观察异常并形成共识防御。真正的风险并不是“瞬时投票”，而是“长期失衡的权重结构”。

**Q4: 如果项目方权重超过 50% 怎么办？**  
A: 那相当于把协议降级成“带延迟的单签金库”。不算错，但安全性会弱。更健康的做法是主动把权重压在 50% 以下，让社区参与进来换取更强的防护。

**Q5: 为什么不直接用多签（Gnosis Safe）？**  
A: 多签更适合“小圈子信任”，ConsensusVault 更适合“开放社区信任”。多签依赖少数人协作；ConsensusVault 依赖分散参与者的共同利益，两者是不同的安全模型。

---

💡 **一句话提示**  
本协议不适合追求极致流动性的投机者，它更适合把“资金安全”和“集体共识”视为底线的项目与社区。

